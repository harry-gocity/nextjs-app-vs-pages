
<script>
  self.__next_f.push([
    1,
    { 1: { I: [4289, []] } },
    { 4: { I: [8523, []] } },
    { 5: { I: [8009, []] } },
    { 7: { I: [4108, []] } },
    { 8: [] },
  ]);
</script>
<script>
  self.__next_f.push({
    0: [
      "$",
      "$L1",
      null,
      {
        buildId: "9bIoQcyPAp6MSahvucPfh",
        assetPrefix: "",
        urlParts: ["", "app", "ssr-with-client"],
        initialTree: [
          "",
          {
            children: [
              "app",
              { children: ["ssr-with-client", { children: ["__PAGE__", {}] }] },
              "$undefined",
              "$undefined",
              true,
            ],
          },
        ],
        initialSeedData: [
          "",
          {
            children: [
              "app",
              {
                children: [
                  "ssr-with-client",
                  { children: ["__PAGE__", {}, [["$L2", "$L3", null], null], null] },
                  [
                    null,
                    [
                      "$",
                      "$L4",
                      null,
                      {
                        parallelRouterKey: "children",
                        segmentPath: ["children", "app", "children", "ssr-with-client", "children"],
                        error: "$undefined",
                        errorStyles: "$undefined",
                        errorScripts: "$undefined",
                        template: ["$", "$L5", null, {}],
                        templateStyles: "$undefined",
                        templateScripts: "$undefined",
                        notFound: "$undefined",
                        notFoundStyles: "$undefined",
                      },
                    ],
                  ],
                  null,
                ],
              },
              [
                [
                  null,
                  [
                    "$",
                    "html",
                    null,
                    {
                      lang: "en",
                      children: [
                        "$",
                        "body",
                        null,
                        {
                          children: [
                            "$",
                            "$L4",
                            null,
                            {
                              parallelRouterKey: "children",
                              segmentPath: ["children", "app", "children"],
                              error: "$undefined",
                              errorStyles: "$undefined",
                              errorScripts: "$undefined",
                              template: ["$", "$L5", null, {}],
                              templateStyles: "$undefined",
                              templateScripts: "$undefined",
                              notFound: "$undefined",
                              notFoundStyles: "$undefined",
                            },
                          ],
                        },
                      ],
                    },
                  ],
                ],
                null,
              ],
              null,
            ],
          },
          [
            null,
            [
              "$",
              "$L4",
              null,
              {
                parallelRouterKey: "children",
                segmentPath: ["children"],
                error: "$undefined",
                errorStyles: "$undefined",
                errorScripts: "$undefined",
                template: ["$", "$L5", null, {}],
                templateStyles: "$undefined",
                templateScripts: "$undefined",
                notFound: [
                  ["$", "title", null, { children: "404: This page could not be found." }],
                  [
                    "$",
                    "div",
                    null,
                    {
                      style: {
                        fontFamily:
                            'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',
                        height: "100vh",
                        textAlign: "center",
                        display: "flex",
                        flexDirection: "column",
                        alignItems: "center",
                        justifyContent: "center",
                      },
                      children: [
                        "$",
                        "div",
                        null,
                        {
                          children: [
                            [
                              "$",
                              "style",
                              null,
                              {
                                dangerouslySetInnerHTML: {
                                  __html:
                                      "body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}",
                                },
                              },
                            ],
                            [
                              "$",
                              "h1",
                              null,
                              {
                                className: "next-error-h1",
                                style: {
                                  display: "inline-block",
                                  margin: "0 20px 0 0",
                                  padding: "0 23px 0 0",
                                  fontSize: 24,
                                  fontWeight: 500,
                                  verticalAlign: "top",
                                  lineHeight: "49px",
                                },
                                children: "404",
                              },
                            ],
                            [
                              "$",
                              "div",
                              null,
                              {
                                style: { display: "inline-block" },
                                children: [
                                  "$",
                                  "h2",
                                  null,
                                  {
                                    style: { fontSize: 14, fontWeight: 400, lineHeight: "49px", margin: 0 },
                                    children: "This page could not be found.",
                                  },
                                ],
                              },
                            ],
                          ],
                        },
                      ],
                    },
                  ],
                ],
                notFoundStyles: [],
              },
            ],
          ],
          null,
        ],
        couldBeIntercepted: false,
        initialHead: [null, "$L6"],
        globalErrorComponent: "$7",
        missingSlots: "$W8",
      },
    ],
  })
</script>
<script>
  self.__next_f.push([
    1,
    {
      6: [
        ["$", "meta", "0", { name: "viewport", content: "width=device-width, initial-scale=1" }],
        ["$", "meta", "1", { charSet: "utf-8" }],
        ["$", "title", "2", { children: "Create Next App" }],
        ["$", "meta", "3", { name: "description", content: "Generated by create next app" }],
        ["$", "link", "4", { rel: "icon", href: "/favicon.ico", type: "image/x-icon", sizes: "16x16" }],
      ],
    },
    { 2: null },
  ]);
</script>
<script>
  self.__next_f.push([
    1,
    { 9: { I: [7035, ["867", "static/chunks/app/app/ssr-with-client/page-c194fe5835b1502b.js"], "ClientComponent"] } },
    { a: "$Sreact.suspense" },
    {
      3: [
        "$",
        "main",
        null,
        {
          children: [
            ["$", "$L9", null, {}],
            ["$", "p", null, { children: ["data: ", "2024-10-09T21:40:57.078Z"] }],
            ["$", "p", null, { children: ["destinations: ", "london, paris"] }],
            ["$", "$a", null, { fallback: ["$", "div", null, { children: "loading..." }], children: "$Lb" }],
          ],
        },
      ],
    },
  ]);
</script>

# After

<script>
  self.__next_f.push([
    1,
    {
      b: [
        ["$", "p", null, { children: ["data: ", "2024-10-09T21:41:07.081Z"] }],
        ["$", "p", null, { children: ["destinations: ", "london, paris"] }],
      ],
    },
  ]);
</script>

# Suspense - https://github.com/facebook/react/blob/main/packages/react-dom-bindings/src/server/fizz-instruction-set/ReactDOMFizzInstructionSetShared.js#L48

<script>
  $RC = function(b, c, e) {
    c = document.getElementById(c);
    c.parentNode.removeChild(c);
    var a = document.getElementById(b);
    if (a) {
      b = a.previousSibling;
      if (e)
        b.data = "$!",
            a.setAttribute("data-dgst", e);
      else {
        e = b.parentNode;
        a = b.nextSibling;
        var f = 0;
        do {
          if (a && 8 === a.nodeType) {
            var d = a.data;
            if ("/$" === d)
              if (0 === f)
                break;
              else
                f--;
            else
              "$" !== d && "$?" !== d && "$!" !== d || f++
          }
          d = a.nextSibling;
          e.removeChild(a);
          a = d
        } while (a);
        for (; c.firstChild; )
          e.insertBefore(c.firstChild, a);
        b.data = "$"
      }
      b._reactRetry && b._reactRetry()
    }
  }
  ;
  $RC("B:0", "S:0")
</script>

# http://localhost:3000/_next/static/chunks/app/app/ssr-with-client/page-c194fe5835b1502b.js

<script>
  (self.webpackChunk_N_E = self.webpackChunk_N_E || []).push([[867], {
    4785: function(n, e, t) {
      Promise.resolve().then(t.bind(t, 7035))
    },
    7035: function(n, e, t) {
      "use strict";
      t.d(e, {
        ClientComponent: function() {
          return i
        }
      });
      var o = t(8376)
          , u = t(7894);
      let i = () => {
        let[n,e] = (0,
            u.useState)(1);
        return (0,
            o.jsxs)("button", {
          onClick: () => {
            console.log("adding one"),
                e(n => n + 1)
          }
          ,
          children: ["+1 to ", n]
        })
      }
    }
  }, function(n) {
    n.O(0, [922, 996, 744], function() {
      return n(n.s = 4785)
    }),
        _N_E = n.O()
  }
  ]);

</script>